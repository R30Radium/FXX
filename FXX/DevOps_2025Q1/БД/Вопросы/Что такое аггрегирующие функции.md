
**Агрегирующие функции** в SQL — это функции, которые выполняют вычисления над набором строк и возвращают одно значение. Они используются для анализа данных, например, для подсчета суммы, среднего значения, максимального или минимального значения и т.д.

---

### Основные агрегирующие функции:
1. **`COUNT()`**:
   - Возвращает количество строк.
   - Пример:
     ```sql
     SELECT COUNT(*) FROM employees;  -- Общее количество строк
     SELECT COUNT(department_id) FROM employees;  -- Количество не-NULL значений
     ```

2. **`SUM()`**:
   - Возвращает сумму значений в столбце.
   - Пример:
     ```sql
     SELECT SUM(salary) FROM employees;  -- Общая сумма зарплат
     ```

3. **`AVG()`**:
   - Возвращает среднее значение.
   - Пример:
     ```sql
     SELECT AVG(salary) FROM employees;  -- Средняя зарплата
     ```

4. **`MIN()`**:
   - Возвращает минимальное значение.
   - Пример:
     ```sql
     SELECT MIN(salary) FROM employees;  -- Минимальная зарплата
     ```

5. **`MAX()`**:
   - Возвращает максимальное значение.
   - Пример:
     ```sql
     SELECT MAX(salary) FROM employees;  -- Максимальная зарплата
     ```

6. **`GROUP_CONCAT()`** (в MySQL) / **`STRING_AGG()`** (в PostgreSQL и SQL Server):
   - Объединяет значения в строку.
   - Пример:
     ```sql
     SELECT GROUP_CONCAT(name) FROM employees;  -- Все имена через запятую
     ```

---

### Особенности:
- Агрегирующие функции обычно используются с `GROUP BY` для группировки данных.
- Если `GROUP BY` не используется, агрегирующие функции применяются ко всем строкам таблицы.
- Игнорируют значения `NULL`, кроме `COUNT(*)`.

---

### Примеры с `GROUP BY`:
1. **Средняя зарплата по отделам**:
   ```sql
   SELECT department_id, AVG(salary)
   FROM employees
   GROUP BY department_id;
   ```

2. **Количество сотрудников в каждом отделе**:
   ```sql
   SELECT department_id, COUNT(*)
   FROM employees
   GROUP BY department_id;
   ```

---

### Итог:
Агрегирующие функции позволяют выполнять вычисления над группами данных, возвращая одно значение. Они полезны для анализа и статистики в SQL-запросах.