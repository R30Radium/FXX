Вот переработанный материал в формате Obsidian с сохранением структуры и добавлением возможностей для эффективного использования:
### 1. Как настроить master-slave репликацию в MySQL (кратко)?
#mysql #replication #database 

> [!summary] Шаги настройки
> **Требуется:** 2 сервера (master и slave) с одинаковой версией MySQL
> 
> **На Master:**
> 1. Конфиг `/etc/my.cnf`:
>    ```ini
>    server-id = 1
>    log_bin = /var/log/mysql/mysql-bin.log
>    binlog_do_db = newdatabase
>    ```
> 2. Перезапуск MySQL: `systemctl restart mysql`
> 3. Создание пользователя репликации:
>    ```sql
>    GRANT REPLICATION SLAVE ON *.* TO 'slave_user'@'%' IDENTIFIED BY 'password';
>    FLUSH PRIVILEGES;
>    ```
> 4. Создание дампа с блокировкой:
>    ```bash
>    mysqldump -u root -p --lock-all-tables newdatabase > newdatabase.sql
>    ```
> 
> **На Slave:**
> 5. Импорт дампа:
>    ```sql
>    CREATE DATABASE newdatabase;
>    ```
>    ```bash
>    mysql -u root -p newdatabase < newdatabase.sql
>    ```
> 6. Конфиг `/etc/my.cnf`:
>    ```ini
>    server-id = 2
>    relay-log = /var/log/mysql/mysql-relay-bin.log
>    binlog_do_db = newdatabase
>    ```
> 7. Перезапуск MySQL
> 8. Запуск репликации:
>    ```sql
>    CHANGE MASTER TO 
>      MASTER_HOST='10.10.0.1',
>      MASTER_USER='slave_user',
>      MASTER_PASSWORD='password',
>      MASTER_LOG_FILE = 'mysql-bin.000001',
>      MASTER_LOG_POS = 107;
>      
>    START SLAVE;
>    ```
> 
> **Проверка:**  
> ```sql
> SHOW SLAVE STATUS\G
> -- Ищем: Slave_IO_Running: Yes, Slave_SQL_Running: Yes
> ```

---

### 2. Какой тип базы данных использует Prometheus?
#prometheus #tsdb #monitoring 

> [!summary] Ответ
> Prometheus использует **TSDB (Time Series Database)** - специализированное хранилище для временных рядов данных с оптимизацией:
> - Хранения метрик с временными метками
> - Быстрых запросов диапазонов времени
> - Эффективного сжатия временных данных
> 
> **Ключевые особенности:**
> - Данные хранятся в блоках по 2 часа
> - Использует локальное хранилище по умолчанию
> - Поддержка long-term хранения через Remote Write

---

### 3. Что такое VACUUM в PostgreSQL?
#postgresql #maintenance #database 

> [!summary] Ответ
> **VACUUM** - механизм управления пространством:
> - Освобождает место от "мёртвых" кортежей (удалённых/устаревших записей)
> - Предотвращает "раздувание" таблиц (table bloat)
> 
> **Типы операций:**
> 1. `VACUUM` (обычный):
>    - Работает параллельно с нагрузкой
>    - Не возвращает пространство ОС
>    - Освобождает место для повторного использования внутри таблицы
> 
> 2. `VACUUM FULL`:
>    - Требует эксклюзивной блокировки
>    - Полностью переписывает таблицу
>    - Возвращает пространство ОС
>    - Значительно медленнее
> 
> **Когда выполнять:**
> - После массовых UPDATE/DELETE
> - Для высоконагруженных таблиц
> - Автоматически через autovacuum (рекомендуется)
```

### Особенности формата:
1. **Иерархическая структура**  
Четкое разделение на мастер/slave с подзаголовками

2. **Подсветка синтаксиса**  
Блоки кода с указанием языка (`sql`, `ini`, `bash`) для правильной подсветки

3. **Компактные списки**  
Использование маркированных списков вместо сплошного текста

4. **Проверочные индикаторы**  
Добавлены комментарии для проверки статуса репликации (`Slave_IO_Running: Yes`)

5. **Контрастные акценты**  
Ключевые термины выделены **жирным** и разделены пустыми строками

6. **Практические советы**  
Добавлены рекомендации по использованию autovacuum для PostgreSQL

7. **Перекрестные ссылки**  
Теги (#replication, #tsdb) позволяют связывать связанные заметки

Для работы в Obsidian:
- Сохраните файл с расширением `.md`
- Убедитесь, что включены плагины Callouts и Syntax Highlighting
- Для SQL-запросов можно использовать плагин Database для выполнения прямо из заметки