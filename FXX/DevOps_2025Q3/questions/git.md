## Git

### 1. Что такое GitFlow?
#git #workflow 

> [!summary] Модель ветвления
> **Ключевые ветки:**
> - `master` - стабильная версия (продакшен)
> - `develop` - основная ветка разработки
> - `feature/*` - ветки функциональностей
> - `release/*` - ветки подготовки релиза
> - `hotfix/*` - срочные исправления
> 
> **Рабочий процесс:**
> 1. `master` → `develop` (база разработки)
> 2. `develop` → `feature/*` (новая функциональность)
> 3. `feature/*` → `develop` (слияние фичи)
> 4. `develop` → `release/*` (подготовка релиза)
> 5. `release/*` → `master` + `develop` (деплой)
> 6. `master` → `hotfix/*` → `master` + `develop` (экстренные правки)
> 
> ![[gitflow.png]]

---

### 2. Merge vs Rebase
#git #merging 

> [!summary] Сравнение
> **`git merge`**  
> ![git-merge](git-merge.png)  
> - Сохраняет историю "как было"  
> - Создает коммит слияния  
> - **Плюсы:** Простота, сохранение контекста  
> - **Минусы:** Загромождает историю  
> 
> **`git rebase`**  
> ![git-rebase](git-rebase.png)  
> - Перезаписывает историю  
> - Линеаризует коммиты  
> - **Плюсы:** Чистая история, удобство для CI/CD  
> - **Минусы:** Опасен для публичных веток  

---

### 3. Tag vs Branch
#git #basics 

> [!summary] Различия
> |               | Tag                  | Branch               |
> |---------------|----------------------|----------------------|
> | **Назначение** | Фиксация версии      | Поток разработки     |
> | **Изменения**  | Неизменяемый         | Динамический         |
> | **Пример**     | `v1.2.3`             | `feature/login`      |
> | **Команда**    | `git tag -a v1.0`    | `git checkout -b new`|

---

### 4. Перенос коммита между ветками
#git #cherry-pick 

> [!summary] Решение
> ```bash
> # Найти хеш коммита в develop
> git log develop
> 
> # Переключиться в master
> git checkout master
> 
> # Перенести коммит
> git cherry-pick <commit_hash>
> ```

---

### 5. git commit --amend
#git #commits 

> [!summary] Назначение
> - Исправление последнего коммита:
>   ```bash
>   git commit --amend -m "Новое сообщение"
>   ```
> - Добавление файлов в последний коммит:
>   ```bash
>   git add забытый_файл.py
>   git commit --amend --no-edit
>   ```
> **Важно:** Не использовать для опубликованных коммитов!

---

### 6. Trunk-based Development
#git #workflow 

> [!summary] Концепция
> Альтернатива GitFlow:
> - Все разработчики работают в одной ветке (`trunk`/`main`)
> - Короткоживущие feature-ветки (макс. 1-2 дня)
> - Непрерывная интеграция
> - Частые мелкие коммиты
> 
> **Преимущества:**
> - Упрощение слияний
> - Раннее обнаружение конфликтов
> - Подходит для CI/CD

---

### 7. Откат репозитория
#git #reset 

> [!summary] Команда
> ```bash
> git reset --hard <commit_hash>
> ```
> **Важно:**
> - `--hard` полностью удалит последующие изменения
> - Использовать только для локальных изменений
> - Для удаленных веток использовать `revert`

---

### 8. Отмена конкретного коммита
#git #revert 

> [!summary] Решение
> ```bash
> git revert <commit_hash>
> ```
> **Особенности:**
> - Создает новый коммит с обратными изменениями
> - Безопасен для опубликованной истории
> - Можно отменить несколько коммитов:
>   ```bash
>   git revert OLDER_COMMIT^..NEWER_COMMIT
>   ```